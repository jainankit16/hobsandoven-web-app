<h3 class="text-themecolor ml-3">
    <i class="fa fa-list-ul"></i> {{pageTitle}}
</h3>
<div class="row">
    <div class="col-lg-12 col-md-10">
        <div [className]="(gridOptions.mainClass) ? 'grid-container' : ''">
            <div [className]="gridOptions.mainClass ? gridOptions.mainClass : 'col-md-12'">
                <div class="row m-t-10 mb-3">
                    <div class="col-12 text-right">
                        <button type="button" class="btn btn-sm mRight editColumn" i18n>
                            <i class="fa fa-th"></i> Edit Columns
                        </button>
                        <div class="dd-column-selector">
                            <li *ngFor='let col of allColumns' class="p-l-5">
                                <input *ngIf="col.name !=''" type='checkbox' [id]="col.prop" (click)='togglex(col)' [checked]='col.visible' />
                                <label *ngIf="col.name !=''" [attr.for]="col.prop">{{col.name}}</label>
                            </li>
                        </div>
                        <button type="button" class="btn btn-sm mRight" (click)="refreshView();" i18n>
                            <i class="fa fa-refresh"></i> Refresh
                        </button>
                        <button *ngIf="tableData[0] && !tableData[0]['message']" class="btn btn-sm" (click)="exportCSV()">
                            <i class="fa fa-download"></i> CSV</button>
                    </div>
                </div>
                <ngx-datatable #myTable class="material striped fixed-header fullscreen doubleScroll" [rows]="tableData" [loadingIndicator]="loadingIndicator"
                    [columnMode]="'standard'" [limit]="10" [headerHeight]="100" [footerHeight]="50" [rowHeight]="60" [reorderable]="true"
                    [sortType]="'single'" ngx-resize-watcher>
                    <div *ngFor="let col of columns">
                        <ngx-datatable-column *ngIf="col.visible" [name]="col.name" [prop]="col.prop" [width]="col.width" [sortable]="col.sortable">
                            <ng-template *ngIf="col.prop == 'Name'" let-row="row" let-value="value" ngx-datatable-cell-template>
                                <span>
                                    <a *ngIf="!tableData[0]['message']" href="javascript:void(0);" (click)="showPanel({gLevel : 1 ,gModule:'pricelist',id :row.sfdcId,gTitle: 'Price Book: '+value,gClass:{min:'col-md-6',max:'col-md-8',default:'col-md-12'}})"
                                        class="scrollToRight">
                                        <span class="job-title">{{value}}</span>
                                    </a>
                                    <a *ngIf="tableData[0]['message']">
                                        <span class="title">{{value}}</span>
                                    </a>
                                </span>
                            </ng-template>
                            <ng-template let-column="column" height="200" let-sort="sortFn" ngx-datatable-header-template>
                                <span class="datatable-header-cell-wrapper float-left" style="height: 35px;">
                                    <span class="datatable-header-cell-label draggable" (click)="sort()">
                                        {{col.name}}
                                    </span>
                                </span>
                                <div class="input-group float-right form-material" *ngIf="col.type !='date'">
                                    <input type="text" class="form-control" [id]="col.prop" placeholder="Type to search..." name="col.prop" [(ngModel)]="filterObj[col.prop]"
                                        (keyup)='filterData($event,"text")' [ngModelOptions]="{standalone: true}">
                                    <span class="input-group-btn">
                                        <a class="dataTable-cross" (click)="clearSearch(col.prop);" href="javascript:void(0);">
                                            <i class="fa fa-times suffex"></i>
                                        </a>
                                    </span>
                                </div>
                                <div class="input-group float-right form-material" *ngIf="col.type =='date'">
                                    <input [owlDateTimeTrigger]="dt" class="form-control" placeholder="Select to search..." [id]="col.prop" [owlDateTime]="dt"
                                        (dateTimeChange)='filterData($event,"date")' readonly="true" [(ngModel)]="col.value"
                                        [ngModelOptions]="{standalone: true}">
                                    <owl-date-time #dt [pickerType]="'calendar'"></owl-date-time>
                                    <span class="input-group-btn">
                                        <a class="dataTable-cross" (click)="clearSearch(col.prop); col.value='';" href="javascript:void(0);">
                                            <i class="fa fa-times suffex"></i>
                                        </a>
                                    </span>
                                </div>
                            </ng-template>

                        </ngx-datatable-column>
                    </div>
                    <ngx-datatable-footer>
                        <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize" let-selectedCount="selectedCount"
                            let-curPage="curPage" let-offset="offset">
                            <div style="padding: 5px 10px">
                                <div>
                                    Total: {{((tableData[0]) && !tableData[0]['message']) ? rowCount : 0}}
                                </div>
                            </div>
                            <datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'" [pagerRightArrowIcon]="'datatable-icon-right'" [pagerPreviousIcon]="'datatable-icon-prev'"
                                [pagerNextIcon]="'datatable-icon-skip'" [page]="curPage" [size]="pageSize" [count]="rowCount"
                                [hidden]="!((rowCount / pageSize) > 1)" (change)="myTable.onFooterPage($event)">
                            </datatable-pager>
                            <div style="padding: 5px 10px" [hidden]="!((rowCount / pageSize) > 1) || noRecord">
                                <div>
                                    <button class="btn btn-sm" (click)="loadMoreRecords()">Load More</button>
                                </div>
                            </div>
                        </ng-template>
                    </ngx-datatable-footer>
                </ngx-datatable>
            </div>
            <app-gridview *ngIf="gridOptions" [params]="gridOptions" (onClicked)="handleClass($event)"></app-gridview>
        </div>
    </div>
</div>