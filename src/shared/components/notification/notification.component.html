<div class="row m-t-20 m-l-10">
    <div class="col-sm-12">
        <h3 class="text-themecolor">
            <i class="fa fa-bell"></i> Notification List
        </h3>
    </div>
</div>
<div class="row">
    <div class="col-12 text-right">
        <div class="m-r-10">
            <span *ngIf="tableData.length > 0">
                <button type="button" class="btn btn-sm btn-primary mRight" (click)="markAsRead()" i18n>
                    <i class="fa fa-envelope-o"></i> Mark All Read
                </button>
            </span>
            <span>
                <button type="button" class="btn btn-sm btn-primary" data-toggle="dropdown" i18n>
                    <i class="fa fa-th"></i>
                </button> &nbsp;
                <div class="dd-column-selector" style="height: 200px;overflow-x: scroll;">
                    <li *ngFor='let col of allColumns' class="p-l-5">
                        <input *ngIf="col.name !=''" type='checkbox' [id]="col.name" (click)='toggle(col)' [checked]='col.visible' />
                        <label *ngIf="col.name !=''" [attr.for]="col.name">{{col.name}}</label>
                    </li>
                </div>
            </span>
        </div>
    </div>
</div>


<div class="card-body">
    <ngx-datatable #myTable class="material striped fixed-header expandable" [ngClass]="(tableData && tableData.length) < 8 ? 'ngxHasData' : ''"
        [rows]="tableData" [loadingIndicator]="loadingIndicator" [columnMode]="'force'" [limit]="itemsPerPage" [headerHeight]="50"
        [footerHeight]="50" [rowHeight]="50" [scrollbarH]="true" ngx-resize-watcher>
        <div *ngFor="let col of columns">
            <ngx-datatable-column *ngIf="col.visible" [name]="col.name" [prop]="col.prop" [width]="col.width" [sortable]="col.sortable">
                <ng-template *ngIf="col.prop == 'type'" let-row="row" ngx-datatable-cell-template>
                    <span class="btn btn-{{row.type}} btn-circle-small notification-pointer">
                        <i class="fa fa-link"></i>
                    </span>
                </ng-template>
                <ng-template *ngIf="col.prop == 'message'" let-row="row" ngx-datatable-cell-template>
                    <a href="javascript:void(0);" (click)="markAsRead(row.alertId , row.viewUrl)">
                        <span class="job-title">{{(row.message) ? row.message : ''}}</span>
                    </a>
                </ng-template>
                <ng-template *ngIf="col.prop == 'isRead'" let-row="row" ngx-datatable-cell-template>
                    <span>
                        <a href="javascript:void(0);">
                            <span [ngClass]="(row.isRead) ? 'fa fa-envelope-open notification-pointer' : 'fa fa-envelope-o'" (click)="(row.isRead) ? false: markAsRead(row.alertId);"
                                (title)="(row.isRead) ? '': 'Mark As Read';"></span>
                        </a>
                    </span>
                </ng-template>
            </ngx-datatable-column>
        </div>
        <ngx-datatable-footer>
            <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize" let-selectedCount="selectedCount"
                let-curPage="curPage" let-offset="offset">
                <div style="padding: 5px 10px">
                    <div>
                        Total: {{(tableData[0]) ? rowCount : 0}}
                    </div>
                </div>
                <datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'" [pagerRightArrowIcon]="'datatable-icon-right'" [pagerPreviousIcon]="'datatable-icon-prev'"
                    [pagerNextIcon]="'datatable-icon-skip'" [page]="curPage" [size]="pageSize" [count]="rowCount" [hidden]="!((rowCount / pageSize) > 1)"
                    (change)="myTable.onFooterPage($event)">
                </datatable-pager>
                <div style="padding: 5px 10px" [hidden]="!((rowCount / pageSize) > 1) || noRecords">
                    <div>
                        <button type="button" class="btn btn-sm" (click)="loadMoreRecords()">Load More</button>
                    </div>
                </div>
            </ng-template>
        </ngx-datatable-footer>
    </ngx-datatable>
</div>