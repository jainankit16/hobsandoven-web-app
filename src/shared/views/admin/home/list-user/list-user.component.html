<!--Document List view start here-->
<div class="card m-t-5">
    <div *ngIf="activeTable">
        <ngx-datatable #myTable class="material striped fixed-header fullscreen" [rows]="tableData" [loadingIndicator]="loadingIndicator"
            [columnMode]="(tableData.length) ? 'force' : 'flex'" [offset]="ngxOffset" [limit]="itemsPerPage" [headerHeight]="60"
            [footerHeight]="50" rowHeight="'auto'" [scrollbarH]="true" ngx-resize-watcher>

            <ngx-datatable-column name="First Name" prop="firstName" [width]="130"></ngx-datatable-column>
            <ngx-datatable-column name="Last Name" prop="lastName" [width]="130"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-0' || tabId  == 'tab-2'" name="Account Status" prop="status" [width]="120"></ngx-datatable-column>
            <ngx-datatable-column name="Department" prop="departmentName" [width]="200"></ngx-datatable-column>
            <ngx-datatable-column name="Job Title" prop="title" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-1'" name="Email / Login" prop="email" [width]="200"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-1'" name="Name" prop="username" [width]="200"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-1'" name="Account Id" prop="accountId" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="isInternalUser && (tabId  == 'tab-1')" name="User Id" prop="id" [width]="110"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-1'" name="Phone" prop="phone" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-1'" name="Account Status" prop="status" [width]="120"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  != 'tab-1'" name="User Type" prop="usertype" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  != 'tab-1' && tabId  != 'tab-2'" name="Functional Role" prop="functionalRole" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-5'" name="Regional Role" prop="region" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-0' || tabId  == 'tab-2' || tabId  == 'tab-5'" name="Country of Residence" prop="country"
                [width]="150"></ngx-datatable-column>

            <ngx-datatable-column *ngIf="tabId  == 'tab-3'" name="Dept (SSMD) Role" prop="deptSSMD" [width]="120"> </ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-3'" name="Dept (PPPD) Role" prop="deptPPPD" [width]="120"> </ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-3'" name="Dept (SAMD) Role" prop="deptSAMD" [width]="120"> </ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-3'" name="Dept (PGMO) Role" prop="deptPGMO" [width]="125"> </ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-3'" name="Dept (FSOD) Role" prop="deptFSOD" [width]="120"> </ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-3'" name="Dept (BPMD) Role" prop="deptBPMD" [width]="120"> </ngx-datatable-column>

            <ngx-datatable-column *ngIf="tabId  == 'tab-4'" name="Functional Role Level" prop="functionalRoleLevel" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-4'" name="Community" prop="community" [width]="130"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-4'" name="Account Name (User)" prop="accountName" [width]="150"></ngx-datatable-column>
            <ngx-datatable-column *ngIf="tabId  == 'tab-4'" name="Group Name" prop="memberRole" [sortable]="false" [width]="150">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <ng-template #groupList>
                        <div *ngFor="let col of row.memberRole; let i = index">
                            <span class="text-bold">{{i+1}}{{'.'}}</span> {{col?.group?.Name}}
                        </div>
                    </ng-template>
                    <div *ngIf="row.memberRole[0]?.group?.Name">{{row.memberRole[0]?.group?.Name?.slice(0,40)}}
                        <span class="icon-color" placement="left" [ngbPopover]="groupList" triggers="hover" popoverTitle="Assigned Groups">...&raquo;</span>
                    </div>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column *ngIf="(tabId  == 'tab-0' || tabId  == 'tab-3') && !isVendor" name="Assigned Program List" prop="memberRole"
                [width]="250" [sortable]="false">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <ng-template #programList>
                        <div *ngFor="let col of row.memberRole; let i = index">
                            <span class="text-bold">{{i+1}}{{'.'}}</span> {{col?.project?.Name}}
                        </div>
                    </ng-template>
                    <div *ngIf="row.memberRole[0]?.project?.Name">{{row.memberRole[0]?.project?.Name?.slice(0,40)}}
                        <span class="icon-color" [ngClass]="tableData.length < 2 ? 'pop-position' : ''" placement="left" triggers="hover" [ngbPopover]="programList" popoverTitle="Assigned Programs">...&raquo;</span>
                    </div>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-column *ngIf="tabId  == 'tab-5'" name="Global Shift Equivalent Schedule (GSES)" prop="workershift" [width]="200"></ngx-datatable-column>

            <ngx-datatable-column name="Action" [sortable]="false" [width]="100">
                <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
                    <div class="input-group-btn">
                        <span class="text-wrap icon-color" data-toggle="dropdown">
                            &nbsp;
                            <i class="fa fa-ellipsis-v"></i> &nbsp;
                        </span>
                        <div class="dropdown-menu action-dd-right">
                            <button class="dropdown-item icon-color" (click)="onActionButtonClick(row, updateBtn)" *ngIf="row?.isActive || tabId  == 'tab-2'"
                                title="Edit">Edit</button>
                            <button class="dropdown-item icon-color" (click)="onActionButtonClick(row, viewBtn)" *ngIf="row?.isActive || tabId  == 'tab-2'"
                                title="View">View</button>
                            <button class="dropdown-item icon-color" *ngIf="tabId  != 'tab-2'" (click)="onClickActive(row)" title="{{(row?.isActive) ? 'Do you want to deactivate this user' : 'Do you want to activate this user'}}">{{(row?.isActive) ? 'Deactivate' : 'Activate'}}</button>
                            <button class="dropdown-item icon-color" (click)="onClickResetPassword(row)" *ngIf="tabId  != 'tab-2' && row?.isActive" title="Reset password">Reset password</button>
                        </div>
                    </div>
                </ng-template>
            </ngx-datatable-column>

            <ngx-datatable-footer>
                <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize" let-selectedCount="selectedCount"
                    let-curPage="curPage" let-offset="offset">
                    <div style="padding: 5px 10px">
                        <div>
                            Total: {{rowCount}}
                        </div>
                    </div>
                    <datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'" [pagerRightArrowIcon]="'datatable-icon-right'" [pagerPreviousIcon]="'datatable-icon-prev'"
                        [pagerNextIcon]="'datatable-icon-skip'" [page]="curPage" [size]="pageSize" [count]="rowCount" [hidden]="!((rowCount / pageSize) > 1)"
                        (change)="myTable.onFooterPage($event)">
                    </datatable-pager>
                    <div style="padding: 5px 10px" [hidden]="!((rowCount / pageSize) > 1) || noRecords">
                        <div>
                            <button class="btn btn-sm" (click)="loadMoreRecords()">Load More</button>
                        </div>
                    </div>
                </ng-template>
            </ngx-datatable-footer>
        </ngx-datatable>
    </div>
</div>
<!--End here-->